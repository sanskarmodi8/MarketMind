schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/MarketMind/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 1c084524858ee3995c3e696e1060e13f
      size: 1117
    - path: src/MarketMind/components/data_ingestion.py
      hash: md5
      md5: 34c1a34c1f87a0a33751209b1a9145db
      size: 1692
    - path: src/MarketMind/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 2a7fddbe54c08421172e72c77e48af3a
      size: 868
    params:
      params.yaml:
        data_ingestion.asset: BTC-USD
        data_ingestion.end_date: '2025-01-01'
        data_ingestion.start_date: '2017-01-01'
    outs:
    - path: artifacts/data_ingestion/data.csv
      hash: md5
      md5: 32366198ba1d37ea6bf7da655895a5c1
      size: 242966
  data_preprocessing:
    cmd: python src/MarketMind/pipeline/stage_02_data_preprocessing.py
    deps:
    - path: artifacts/data_ingestion/data.csv
      hash: md5
      md5: 32366198ba1d37ea6bf7da655895a5c1
      size: 242966
    - path: config/config.yaml
      hash: md5
      md5: 1c084524858ee3995c3e696e1060e13f
      size: 1117
    - path: src/MarketMind/components/data_preprocessing.py
      hash: md5
      md5: dc45651a716542ae20c1318c6a8a9965
      size: 3442
    - path: src/MarketMind/pipeline/stage_02_data_preprocessing.py
      hash: md5
      md5: 9e2b3471b3d0ab159b2efe22db2945c7
      size: 812
    outs:
    - path: artifacts/data_preprocessing/preprocessed_data/
      hash: md5
      md5: e79ec5af4860dfccac5c240fc0640630.dir
      size: 441722
      nfiles: 2
  model_training:
    cmd: python src/MarketMind/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/data_preprocessing/preprocessed_data/train.csv
      hash: md5
      md5: 7e4f3922a1bf9cf19b37b585c68437bf
      size: 355533
    - path: config/config.yaml
      hash: md5
      md5: 1c084524858ee3995c3e696e1060e13f
      size: 1117
    - path: src/MarketMind/components/model_training.py
      hash: md5
      md5: ef949cb1ec7ceeeae192f982c7fa719c
      size: 8450
    - path: src/MarketMind/pipeline/stage_03_model_training.py
      hash: md5
      md5: b78680009e44da3107fdd109728f25c5
      size: 812
    params:
      params.yaml:
        model_training.batch_size: 256
        model_training.ent_coef: 0.01
        model_training.eval_freq: 5000
        model_training.gamma: 0.99
        model_training.initial_balance: 1.0
        model_training.initial_lr: 0.0003
        model_training.n_epochs: 15
        model_training.n_steps: 4096
        model_training.net_arch:
        - 256
        - 256
        model_training.reward_scaling: 1.0
        model_training.total_timesteps: 20000000
        model_training.transaction_cost: 0.001
        model_training.turnover_penalty: 0.0005
        model_training.window_size: 100
    outs:
    - path: artifacts/model_training/model/
      hash: md5
      md5: 5d2b15bd2f4028e8b753ee76f38d1a0b.dir
      size: 6108786
      nfiles: 3
    - path: artifacts/model_training/tb_logs/
      hash: md5
      md5: 64abaabc2a07236c33aceded4350563e.dir
      size: 412313
      nfiles: 1
  model_evaluation:
    cmd: python src/MarketMind/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_preprocessing/preprocessed_data/test.csv
      hash: md5
      md5: 21cd966f6c8af3557d526e3e3fe2f14f
      size: 86189
    - path: artifacts/model_training/model/
      hash: md5
      md5: 5d2b15bd2f4028e8b753ee76f38d1a0b.dir
      size: 6108786
      nfiles: 3
    - path: config/config.yaml
      hash: md5
      md5: 1c084524858ee3995c3e696e1060e13f
      size: 1117
    - path: src/MarketMind/components/model_evaluation.py
      hash: md5
      md5: c5b6eccc9e563fd900ea66b55935f2ad
      size: 16914
    - path: src/MarketMind/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: 1a6929fa72c62f85a448093d03592b27
      size: 980
    params:
      params.yaml:
        model_training.initial_balance: 1.0
        model_training.reward_scaling: 1.0
        model_training.transaction_cost: 0.001
        model_training.turnover_penalty: 0.0005
        model_training.window_size: 100
    outs:
    - path: artifacts/model_evaluation/plots/
      hash: md5
      md5: 7104fa00574fe33984a83e4c45e4966b.dir
      size: 232403
      nfiles: 4
    - path: artifacts/model_evaluation/report/
      hash: md5
      md5: 551b25895cef99c89be39996b6c9e0c5.dir
      size: 325
      nfiles: 2
